<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Endpoints - Syft Router Documentation</title>
    <link rel="stylesheet" href="styles.css?v=2">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Notice Bar -->
    <div class="notice-bar">
        <div class="notice-container">
            <span class="notice-text">Notice: Syft Router is in ALPHA. A major update will arrive mid-November ‚Äî stay connected for updates.</span>
        </div>
    </div>    <!-- Header -->
    <header class="header">
        <div class="header-container">
            <a href="../index.html" class="logo">
                <img width="32" height="32" src="../src/assets/openmined.png" alt="OpenMined Logo">
                <span>Syft Router</span>
            </a>
            <nav class="nav">
                <a href="index.html">Home</a>
                
                <a href="guides.html">Guides</a>
                <a href="api-reference.html">API Reference</a>
                <a href="../protocol.html">Protocol</a>
                <a href="https://github.com/OpenMined/syft-llm-router" target="_blank" class="github-link">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                    </svg>
                </a>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <div class="doc-layout">
        <!-- Breadcrumb -->
        <nav class="breadcrumb">
            
            <span class="separator">‚Ä∫</span>
            <a href="api-reference.html">API Reference</a>
            <span class="separator">‚Ä∫</span>
            <span>Endpoints</span>
        </nav>

        <!-- Document Header -->
        <div class="doc-header">
            <h1>Router Endpoints</h1>
            <p class="lead">Complete API reference for all router endpoints accessible through the SyftBox relay system. Learn how to interact with chat, search, and health endpoints securely without opening firewalls.</p>
        </div>

        <!-- Navigation Pills -->
        <div class="nav-pills">
            <a href="api-endpoints.html" class="nav-pill active">Endpoints</a>
            <a href="api-authentication.html" class="nav-pill">Authentication</a>
            <a href="api-accounting.html" class="nav-pill">Accounting</a>
            <a href="api-code-structure.html" class="nav-pill">Code Structure</a>
        </div>

        <!-- Document Content -->
        <div class="doc-content">
            <h2>How Router APIs Work</h2>
            <p>Each router runs on its own port (<code>http://localhost:[ROUTER_PORT]/</code>), but this is not a regular FastAPI server accessible to the public. Instead, Syft runs relays which are responsible for forwarding messages between users and routers.</p>
            
            <p>As communication is encrypted, these relays are blind to the messages exchanged, but it allows us to easily address services over the network in a unified way, just by knowing the email and the name of the router we want to query.</p>

            <div class="info-box">
                <strong>üîê Secure Communication</strong>
                <p>All router endpoints are accessed through the SyftBox relay system, which routes requests based on the <code>x-syft-url</code> parameter. This allows secure communication without opening firewalls.</p>
            </div>

            <h2>Request Structure and Parameters</h2>
            <p>All SyftBox relay requests follow a consistent structure with specific query parameters and request patterns. Understanding these parameters is crucial for successful API interactions.</p>

            <h3>Common Request Parameters</h3>
            <div class="features-grid" style="margin: 2rem 0;">
                <div class="feature-card">
                    <h4>Required Headers</h4>
                    <ul style="margin-top: 0.5rem; font-size: 0.9rem;">
                        <li><code>Content-Type: application/json</code></li>
                        <li><code>x-syft-from</code>: Sender email identification</li>
                        <li><code>timeout</code>: Request timeout (milliseconds)</li>
                    </ul>
                </div>
                <div class="feature-card">
                    <h4>Required Body Fields</h4>
                    <ul style="margin-top: 0.5rem; font-size: 0.9rem;">
                        <li><code>x-syft-url</code>: Target syft:// endpoint URL</li>
                        <li><code>x-syft-from</code>: Sender email (can be in header or body)</li>
                        <li><code>suffix-sender</code>: Boolean for sender information</li>
                    </ul>
                </div>
            </div>

            <h3>Syft URL Format</h3>
            <p>The syft:// URL format is the core addressing mechanism for routers:</p>
            <pre><code>syft://[owner_email]/app_data/[router_name]/rpc/[endpoint]

Examples:
- syft://sender@openmined.org/app_data/mit-press-test/rpc/search
- syft://aggregator@openmined.org/app_data/claude-sonnet-3.5/rpc/chat
- syft://owner@example.com/app_data/my-router/rpc/health</code></pre>

            <h3>Polling URL Parameters</h3>
            <p>When polling for results, the following query parameters are automatically included:</p>
            <pre><code>/api/v1/send/poll?[parameters]

Parameter Details:
- x-syft-request-id: Unique identifier for the specific request
- x-syft-url: URL-encoded syft:// address (RFC 3986)
- x-syft-from: Sender email address
- x-syft-raw: Response format (false = JSON wrapped, true = raw)</code></pre>

            <div class="info-box">
                <strong>üìã Parameter Requirements</strong>
                <ul style="margin-top: 0.5rem;">
                    <li><code>x-syft-url</code> must be properly URL-encoded when used in query parameters</li>
                    <li><code>suffix-sender</code> controls whether sender information is included in response metadata</li>
                    <li><code>user_email</code> is service-specific and may be required for certain routers</li>
                    <li><code>transaction_token</code> is used for authenticated requests and accounting</li>
                </ul>
            </div>

            <h2>FastSyftBox JavaScript Client</h2>
            <p>For JavaScript applications, the FastSyftBox library provides a simplified interface that abstracts away the polling mechanism and request formatting. This makes it much easier to interact with SyftBox routers from web applications.</p>

            <h3>Installation</h3>
            <pre><code>npm install fastsyftbox</code></pre>
            
            <p>Or include directly via CDN:</p>
            <pre><code>&lt;script src="https://cdn.jsdelivr.net/npm/fastsyftbox@latest/dist/fastsyftbox.min.js"&gt;&lt;/script&gt;</code></pre>

            <h3>Basic Usage</h3>
            <p>The <code>syftFetch</code> function works similar to the standard <code>fetch</code> API but handles SyftBox routing automatically:</p>

            <div class="features-grid" style="margin: 2rem 0;">
                <div class="feature-card">
                    <h4>Standard Fetch</h4>
                    <pre style="font-size: 0.8rem; background: var(--color-bg-code); padding: 1rem; border-radius: 6px; margin-top: 1rem;"><code>const url = "http://somewebsite.com/api"
const request = await fetch(url, {
    method: 'POST',
    headers: {
        'Content-Type': 'application/json'
    },
    body: JSON.stringify({message: "Hello"})
});</code></pre>
                </div>
                <div class="feature-card">
                    <h4>SyftBox Fetch</h4>
                    <pre style="font-size: 0.8rem; background: var(--color-bg-code); padding: 1rem; border-radius: 6px; margin-top: 1rem;"><code>const syftUrl = "syft://madhava@openmined.org/app_data/fastsyftbox/rpc/hello"
const request = await syftFetch(syftUrl, {
    method: 'POST',
    headers: {
        'Content-Type': 'application/json'
    },
    body: JSON.stringify({message: "Hello"})
});</code></pre>
                </div>
            </div>

            <h3>What FastSyftBox Does Under the Hood</h3>
            <ul>
                <li><strong>Request Translation</strong>: Converts syft:// URLs to proper SyftBox relay endpoints</li>
                <li><strong>Header Management</strong>: Automatically adds required <code>x-syft-*</code> headers</li>
                <li><strong>Polling Automation</strong>: Waits for queued responses and polls until completion</li>
                <li><strong>Error Handling</strong>: Manages timeouts and retry logic</li>
                <li><strong>Response Processing</strong>: Extracts the actual router response from the relay wrapper</li>
            </ul>

            <h3>Configuration Options</h3>
            <p>FastSyftBox can be configured for different environments:</p>
            <pre><code>import { configureSyftBox, syftFetch } from 'fastsyftbox';

// Configure for custom SyftBox relay
configureSyftBox({
    relayUrl: 'https://custom-relay.example.com',
    defaultTimeout: 30000,
    pollingInterval: 2000,
    maxRetries: 5
});

// Use configured client
const response = await syftFetch("syft://owner@example.com/app_data/router/rpc/chat", {
    method: 'POST',
    body: JSON.stringify({message: "Hello"})
});</code></pre>

            <div class="info-box">
                <strong>üìö Learn More</strong>
                <p>For complete documentation, examples, and source code, visit the <a href="https://github.com/OpenMined/fastsyftbox" target="_blank">FastSyftBox GitHub repository</a>.</p>
            </div>

            <h2>Core Service Endpoints</h2>

            <h3>Chat Endpoint</h3>
            <p>Send chat messages to a router's chat service through the SyftBox relay.</p>

            <div class="api-section">
                <div class="api-method">
                    <strong>POST</strong> <code>https://syftbox.net/api/v1/send/</code>
                </div>

                <h4>Request Headers</h4>
                <ul>
                    <li><code>x-syft-from</code>: Your email address (sender identification)</li>
                    <li><code>x-syft-url</code>: Target router endpoint in format <code>syft://owner_email/app_data/router_name/rpc/chat</code></li>
                    <li><code>timeout</code>: Request timeout in milliseconds (default: 5000)</li>
                </ul>

                <h4>Request Body</h4>
                <pre><code>{
  "message": "string (required) - The user's message",
  "conversation_id": "string (optional) - Conversation identifier",
  "model": "string (optional) - Specific model to use",
  "temperature": "number (optional) - Response randomness (0.0-1.0)",
  "max_tokens": "number (optional) - Maximum response length",
  "suffix-sender": "boolean (optional) - Include sender in response",
  "x-syft-url": "string (required) - Target router syft:// URL"
}</code></pre>

                <h4>Example Request</h4>
                <pre><code>curl -X POST https://syftbox.net/api/v1/send/ \
  -H "Content-Type: application/json" \
  -H "x-syft-from: user@example.com" \
  -H "timeout: 5000" \
  -d '{
    "message": "What is machine learning?",
    "conversation_id": "conv_123",
    "suffix-sender": "true",
    "x-syft-url": "syft://router_owner@example.com/app_data/my_router/rpc/chat"
  }'</code></pre>

                <h4>Response (HTTP 202 Accepted)</h4>
                <p>The SyftBox relay returns a polling response for async processing:</p>
                <pre><code>{
  "request_id": "req_abc123",
  "status": "accepted",
  "data": {
    "poll_url": "/api/v1/requests/req_abc123/status",
    "message": "Request queued for processing"
  }
}</code></pre>

                <h4>Final Response (after polling)</h4>
                <pre><code>{
  "status": "success",
  "status_code": 200,
  "headers": {
    "content-type": "application/json"
  },
  "body": {
    "response": "Machine learning is a subset of artificial intelligence...",
    "conversation_id": "conv_123",
    "model_used": "gpt-3.5-turbo",
    "tokens_used": 150,
    "processing_time": 1.2
  }
}</code></pre>
            </div>

            <h3>Search Endpoint</h3>
            <p>Query a router's document search service through the SyftBox relay.</p>

            <div class="api-section">
                <div class="api-method">
                    <strong>POST</strong> <code>https://syftbox.net/api/v1/send/</code>
                </div>

                <h4>Request Body</h4>
                <pre><code>{
  "query": "string (required) - Search query",
  "limit": "number (optional) - Max results to return (default: 5)",
  "filters": "object (optional) - Metadata filters",
  "search_type": "string (optional) - 'vector', 'keyword', or 'hybrid'",
  "suffix-sender": "boolean (optional) - Include sender in response",
  "x-syft-url": "string (required) - Target router syft:// URL"
}</code></pre>

                <h4>Example Request</h4>
                <pre><code>curl -X POST https://syftbox.net/api/v1/send/ \
  -H "Content-Type: application/json" \
  -H "x-syft-from: user@example.com" \
  -H "timeout: 5000" \
  -d '{
    "query": "machine learning concepts",
    "limit": 5,
    "filters": {"category": "technical"},
    "suffix-sender": "true",
    "x-syft-url": "syft://router_owner@example.com/app_data/my_router/rpc/search"
  }'</code></pre>

                <h4>Response (after polling)</h4>
                <pre><code>{
  "status": "success",
  "status_code": 200,
  "headers": {
    "content-type": "application/json"
  },
  "body": {
    "query": "machine learning concepts",
    "results": [
      {
        "content": "Machine learning is a method of data analysis...",
        "score": 0.95,
        "metadata": {
          "source": "ml-guide.pdf",
          "page": 1,
          "category": "technical"
        },
        "id": "doc_123"
      }
    ],
    "total_results": 1,
    "processing_time": 0.3
  }
}</code></pre>
            </div>

            <h2>Health and Status Endpoints</h2>

            <h3>Health Check</h3>
            <p>Check overall router health through the SyftBox relay system.</p>

            <div class="api-section">
                <h4>Example Request</h4>
                <pre><code>curl -X POST https://syftbox.net/api/v1/send/ \
  -H "Content-Type: application/json" \
  -H "x-syft-from: user@example.com" \
  -H "timeout: 5000" \
  -d '{
    "suffix-sender": "true",
    "x-syft-url": "syft://router_owner@example.com/app_data/my_router/rpc/health"
  }'</code></pre>

                <h4>Response (after polling)</h4>
                <pre><code>{
  "status": "success",
  "status_code": 200,
  "headers": {
    "content-type": "application/json"
  },
  "body": {
    "status": "healthy",
    "services": {
      "chat": "running",
      "search": "running"
    },
    "uptime": "2h 45m",
    "version": "1.0.0",
    "timestamp": "2024-01-15T10:30:00Z"
  }
}</code></pre>
            </div>

            <h3>Service Status</h3>
            <p>Check specific service status through the relay.</p>

            <div class="api-section">
                <h4>Example Request</h4>
                <pre><code>curl -X POST https://syftbox.net/api/v1/send/ \
  -H "Content-Type: application/json" \
  -H "x-syft-from: user@example.com" \
  -d '{
    "service": "chat",
    "suffix-sender": "true",
    "x-syft-url": "syft://router_owner@example.com/app_data/my_router/rpc/status"
  }'</code></pre>

                <h4>Response (after polling)</h4>
                <pre><code>{
  "status": "success",
  "status_code": 200,
  "headers": {
    "content-type": "application/json"
  },
  "body": {
    "service": "chat",
    "status": "running",
    "last_request": "2024-01-15T10:30:00Z",
    "response_time_avg": "150ms",
    "error_rate": "0.1%",
    "requests_today": 142
  }
}</code></pre>
            </div>

            

            <h2>Router Information Endpoints</h2>

            <h3>Router Metadata</h3>
            <p>Get router information and capabilities through the SyftBox relay.</p>

            <div class="api-section">
                <h4>Example Request</h4>
                <pre><code>curl -X POST https://syftbox.net/api/v1/send/ \
  -H "Content-Type: application/json" \
  -H "x-syft-from: user@example.com" \
  -d '{
    "suffix-sender": "true",
    "x-syft-url": "syft://router_owner@example.com/app_data/my_router/rpc/info"
  }'</code></pre>

                <h4>Response (after polling)</h4>
                <pre><code>{
  "status": "success",
  "status_code": 200,
  "headers": {
    "content-type": "application/json"
  },
  "body": {
    "name": "my-ai-router",
    "version": "1.0.0",
    "description": "AI-powered chat and search router",
    "author": "router_owner@example.com",
    "services": {
      "chat": {
        "enabled": true,
        "models": ["gpt-3.5-turbo", "gpt-4"],
        "pricing": {
          "per_request": 0.01,
          "per_token": 0.0001
        }
      },
      "search": {
        "enabled": true,
        "collection_size": 10000,
        "pricing": {
          "per_request": 0.005
        }
      }
    },
    "published": true,
    "tags": ["chat", "search", "ai"]
  }
}</code></pre>
            </div>

            <h2>Error Responses</h2>
            <p>SyftBox relay responses follow a consistent format. Errors can occur at the relay level or from the target router.</p>

            <h3>Common Error Types</h3>

            <div class="features-grid" style="margin: 2rem 0;">
                <div class="feature-card">
                    <h4>Relay Errors (HTTP 4xx/5xx)</h4>
                    <pre style="font-size: 0.8rem; background: var(--color-bg-code); padding: 1rem; border-radius: 6px; margin-top: 1rem;"><code>{
  "error": "invalid_request",
  "message": "Missing required field: x-syft-url",
  "code": 400,
  "timestamp": "2024-01-15T10:30:00Z"
}</code></pre>
                </div>
                <div class="feature-card">
                    <h4>Authentication Errors (HTTP 401)</h4>
                    <pre style="font-size: 0.8rem; background: var(--color-bg-code); padding: 1rem; border-radius: 6px; margin-top: 1rem;"><code>{
  "error": "unauthorized",
  "message": "Invalid or expired SyftBox token",
  "code": 401,
  "timestamp": "2024-01-15T10:30:00Z"
}</code></pre>
                </div>
                <div class="feature-card">
                    <h4>Router Not Found (HTTP 404)</h4>
                    <pre style="font-size: 0.8rem; background: var(--color-bg-code); padding: 1rem; border-radius: 6px; margin-top: 1rem;"><code>{
  "status": "ERROR",
  "message": "No request found or router unavailable",
  "request_id": "req_abc123"
}</code></pre>
                </div>
                <div class="feature-card">
                    <h4>Polling Timeout (HTTP 500)</h4>
                    <pre style="font-size: 0.8rem; background: var(--color-bg-code); padding: 1rem; border-radius: 6px; margin-top: 1rem;"><code>{
  "error": "No response exists. Polling timed out",
  "message": "Router did not respond within timeout period",
  "code": 500
}</code></pre>
                </div>
            </div>

            <h3>Router Errors (Wrapped in Success Response)</h3>
            <p>When the router itself returns an error, it's wrapped in a successful polling response:</p>
            <pre><code>{
  "status": "success",
  "status_code": 500,
  "headers": {
    "content-type": "application/json"
  },
  "body": {
    "error": "service_unavailable",
    "message": "Chat service is currently offline",
    "service": "chat",
    "timestamp": "2024-01-15T10:30:00Z"
  }
}</code></pre>

            <h2>Polling Mechanism</h2>
            <p>The SyftBox relay uses an asynchronous request-response pattern with polling to handle requests that may take time to process. This mechanism ensures reliable message delivery while accommodating variable processing times across different routers and services.</p>

            <h3>How Polling Works</h3>
            <ol>
                <li><strong>Initial Request</strong>: Send your request to <code>https://syftbox.net/api/v1/send/</code>
                    <ul>
                        <li>Returns HTTP 202 (Accepted) immediately</li>
                        <li>Includes <code>request_id</code> for tracking</li>
                        <li>Provides <code>poll_url</code> for checking status</li>
                    </ul>
                </li>
                <li><strong>Polling Phase</strong>: Continuously check the <code>poll_url</code>
                    <ul>
                        <li>Use the full polling URL: <code>https://syftbox.net{poll_url}</code></li>
                        <li>Poll every 1-2 seconds until response is ready</li>
                        <li>Handle timeout scenarios gracefully</li>
                    </ul>
                </li>
                <li><strong>Final Response</strong>: Receive the actual router response
                    <ul>
                        <li>Contains the processed result from the target router</li>
                        <li>Includes original request metadata and timing information</li>
                    </ul>
                </li>
            </ol>

            <h3>Polling URL Structure</h3>
            <p>The polling URL returned in the initial response contains all necessary parameters:</p>
            <pre><code>/api/v1/send/poll?x-syft-request-id={request_id}&x-syft-url={encoded_syft_url}&x-syft-from={sender_email}&x-syft-raw=false</code></pre>

            <div class="features-grid" style="margin: 2rem 0;">
                <div class="feature-card">
                    <h4>Query Parameters</h4>
                    <ul style="margin-top: 0.5rem; font-size: 0.9rem;">
                        <li><code>x-syft-request-id</code>: Unique request identifier</li>
                        <li><code>x-syft-url</code>: URL-encoded target syft:// address</li>
                        <li><code>x-syft-from</code>: Sender email address</li>
                        <li><code>x-syft-raw</code>: Response format (false for JSON)</li>
                    </ul>
                </div>
                <div class="feature-card">
                    <h4>Polling States</h4>
                    <ul style="margin-top: 0.5rem; font-size: 0.9rem;">
                        <li><strong>Pending</strong>: Request is being processed</li>
                        <li><strong>Success</strong>: Response ready</li>
                        <li><strong>Error</strong>: Request failed</li>
                        <li><strong>Timeout</strong>: Processing time exceeded</li>
                    </ul>
                </div>
            </div>

            <h3>Complete Search + Chat Flow Example</h3>
            <p>This example demonstrates a typical workflow combining search and chat services, showing the complete polling process for both requests:</p>

            <h4>Step 1: Search Request</h4>
            <pre><code># Initial search request
curl -X POST https://syftbox.net/api/v1/send/ \
  -H "Content-Type: application/json" \
  -d '{
    "query": "tell me about the recent satellite crash",
    "user_email": "sarah.johnson@spacetech.org",
    "suffix-sender": true,
    "x-syft-url": "syft://data.provider@aerospace.net/app_data/space-news-index/rpc/search",
    "x-syft-from": "guest@syftbox.net"
  }'</code></pre>

            <p><strong>Initial Response (HTTP 202):</strong></p>
            <pre><code>{
  "request_id": "a7f2d8e5-9b41-4c67-8d93-2e5f7a1b9c84",
  "data": {
    "poll_url": "/api/v1/send/poll?x-syft-request-id=a7f2d8e5-9b41-4c67-8d93-2e5f7a1b9c84&x-syft-url=syft%3A//data.provider@aerospace.net/app_data/space-news-index/rpc/search&x-syft-from=guest@syftbox.net&x-syft-raw=false"
  },
  "message": "Request has been accepted. Please check back later."
}</code></pre>

            <p><strong>Polling for Search Results:</strong></p>
            <pre><code>GET https://syftbox.net/api/v1/send/poll?x-syft-request-id=a7f2d8e5-9b41-4c67-8d93-2e5f7a1b9c84&x-syft-url=syft%3A//data.provider@aerospace.net/app_data/space-news-index/rpc/search&x-syft-from=guest@syftbox.net&x-syft-raw=false</code></pre>

            <p><strong>Final Search Response:</strong></p>
            <pre><code>{
  "request_id": "a7f2d8e5-9b41-4c67-8d93-2e5f7a1b9c84",
  "data": {
    "message": {
      "body": {
        "cost": 0,
        "id": "3e9c8d72-5f41-4a8b-9d67-1c2e8f4a7b93",
        "providerInfo": {
          "provider": "vector_search"
        },
        "query": "tell me about the recent satellite crash",
        "results": [
          {
            "content": "BREAKING: European Space Agency confirms the loss of the EuroSat-7 communications satellite following an unexpected collision with space debris. The incident occurred at 14:32 UTC on October 14, 2025, at an altitude of 850 kilometers above the Pacific Ocean. Initial telemetry data suggests the satellite's main communications array was severely damaged, rendering it inoperable.\n\nESA Mission Control in Darmstadt is working with international partners to track the resulting debris field.",
            "embedding": null,
            "id": "0",
            "metadata": {
              "filename": "eurosat-7-collision-incident-report.md",
              "source": "European Space Agency",
              "date": "2025-10-14",
              "category": "incident_report"
            },
            "score": 0.8947263508300781
          },
          {
            "content": "**Source:** [https://spaceflightnow.com/2025/10/14/satellite-debris-collision-analysis/](https://spaceflightnow.com/2025/10/14/satellite-debris-collision-analysis/)\n\n## Technical Analysis\n\nPreliminary analysis indicates the EuroSat-7 satellite collided with a fragment from the 2019 Indian anti-satellite test. The debris piece, catalogued as object 44692, was approximately 15cm in diameter and traveling at a relative velocity of 8.2 km/s.\n\n## Impact Assessment\n\nThe collision generated an estimated 200-400 new trackable debris pieces larger than 10cm. The European Space Operations Centre has issued collision avoidance advisories for 12 operational satellites in similar orbital planes.",
            "embedding": null,
            "id": "1",
            "metadata": {
              "filename": "technical-collision-analysis-oct-2025.md",
              "source": "Spaceflight Now",
              "date": "2025-10-14",
              "category": "technical_analysis"
            },
            "score": 0.8234567123456789
          },
          {
            "content": "The loss of EuroSat-7 represents a significant disruption to telecommunications infrastructure across Central and Eastern Europe. The satellite provided critical backup communications for emergency services and rural internet connectivity. Alternative routing through EuroSat-5 and EuroSat-9 is being implemented, though some service degradation is expected for 4-6 weeks.\n\nInsurance companies estimate preliminary losses at ‚Ç¨340 million, making this one of the costliest space incidents of 2025.",
            "embedding": null,
            "id": "2",
            "metadata": {
              "filename": "eurosat-7-service-impact-assessment.md",
              "source": "Satellite Industry Association",
              "date": "2025-10-15",
              "category": "economic_impact"
            },
            "score": 0.7891234567890123
          }
        ]
      },
      "created": "2025-10-16T09:15:22.341089Z",
      "expires": "2025-10-17T09:15:22.260641Z",
      "headers": {
        "content-length": "2847",
        "content-type": "application/json"
      },
      "id": "a7f2d8e5-9b41-4c67-8d93-2e5f7a1b9c84",
      "method": "",
      "sender": "data.provider@aerospace.net",
      "status_code": 200,
      "url": "syft://data.provider@aerospace.net/app_data/space-news-index/rpc/search"
    }
  }
}</code></pre>

            <h4>Step 2: Chat Request Using Search Results</h4>
            <pre><code># Chat request with search context
curl -X POST https://syftbox.net/api/v1/send/ \
  -H "Content-Type: application/json" \
  -d '{
    "model": "claude-3-haiku",
    "messages": [
      {
        "role": "system",
        "content": "You are a helpful AI assistant that can answer questions using both provided sources and your general knowledge.\n\nWhen sources are provided, use them as your primary information and supplement with your general knowledge when helpful. If you don'\''t know the answer from the sources, you can still use your general knowledge to provide a helpful response.\n\nWhen no sources are provided, rely on your general knowledge to answer the question comprehensively."
      },
      {
        "role": "system", 
        "content": "Here is relevant source context to help answer the user'\''s question:\n\n[eurosat-7-collision-incident-report.md]\nBREAKING: European Space Agency confirms the loss of the EuroSat-7 communications satellite following an unexpected collision with space debris. The incident occurred at 14:32 UTC on October 14, 2025, at an altitude of 850 kilometers above the Pacific Ocean. Initial telemetry data suggests the satellite'\''s main communications array was severely damaged, rendering it inoperable.\n\nESA Mission Control in Darmstadt is working with international partners to track the resulting debris field.\n\n[technical-collision-analysis-oct-2025.md]\n**Source:** [https://spaceflightnow.com/2025/10/14/satellite-debris-collision-analysis/](https://spaceflightnow.com/2025/10/14/satellite-debris-collision-analysis/)\n\n## Technical Analysis\n\nPreliminary analysis indicates the EuroSat-7 satellite collided with a fragment from the 2019 Indian anti-satellite test. The debris piece, catalogued as object 44692, was approximately 15cm in diameter and traveling at a relative velocity of 8.2 km/s.\n\n## Impact Assessment\n\nThe collision generated an estimated 200-400 new trackable debris pieces larger than 10cm.\n\n[eurosat-7-service-impact-assessment.md]\nThe loss of EuroSat-7 represents a significant disruption to telecommunications infrastructure across Central and Eastern Europe. The satellite provided critical backup communications for emergency services and rural internet connectivity. Insurance companies estimate preliminary losses at ‚Ç¨340 million, making this one of the costliest space incidents of 2025."
      },
      {
        "role": "user",
        "content": "tell me about the recent satellite crash"
      }
    ],
    "user_email": "sarah.johnson@spacetech.org",
    "transaction_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImY4aGo2d20xazc1cWJscnYzZTdkODVhbiIsInNlbmRlckVtYWlsIjoic2FyYWguam9obnNvbkBzcGFjZXRlY2gub3JnIiwicmVjaXBpZW50RW1haWwiOiJhZ2dyZWdhdG9yQGFpLXJvdXRlci5jb20iLCJpYXQiOjE3Mjk2NTk3MjUsImV4cCI6MTcyOTc0NjEyNX0.9KjPnY8wLcQbWxBzVTYqS7m9VQgH5rlHZF2tI3oAZew",
    "suffix-sender": true,
    "x-syft-url": "syft://ai-router@spacetech.ai/app_data/claude-3-haiku/rpc/chat",
    "x-syft-from": "guest@syftbox.net"
  }'</code></pre>

            <p><strong>Initial Chat Response (HTTP 202):</strong></p>
            <pre><code>{
  "request_id": "b9c4f7e2-1a8d-4e56-9f73-3b2e8c6d4a91",
  "data": {
    "poll_url": "/api/v1/send/poll?x-syft-request-id=b9c4f7e2-1a8d-4e56-9f73-3b2e8c6d4a91&x-syft-url=syft://ai-router@spacetech.ai/app_data/claude-3-haiku/rpc/chat&x-syft-from=guest@syftbox.net&x-syft-raw=false"
  },
  "message": "Request has been accepted. Please check back later."
}</code></pre>

            <p><strong>Polling Chat Request (Initial Attempts May Timeout):</strong></p>
            <pre><code># First few polling attempts might return:
{
  "error": "timeout",
  "message": "Polling timeout reached. The request may still be processing.",
  "request_id": "b9c4f7e2-1a8d-4e56-9f73-3b2e8c6d4a91"
}</code></pre>

            <p><strong>Final Chat Response (After Successful Polling):</strong></p>
            <pre><code>{
  "request_id": "b9c4f7e2-1a8d-4e56-9f73-3b2e8c6d4a91",
  "data": {
    "message": {
      "body": {
        "cost": 0.18,
        "finishReason": "stop",
        "id": "5f2a9c1e-8d47-4b6c-9e83-2a5f7c1d8e94",
        "logprobs": null,
        "message": {
          "content": "# EuroSat-7 Satellite Collision Analysis\n\nBased on the recent incident reports, here'\''s a comprehensive overview of the EuroSat-7 satellite crash:\n\n## Incident Overview\nOn October 14, 2025, at 14:32 UTC, the EuroSat-7 communications satellite was lost following a collision with space debris at 850 kilometers altitude above the Pacific Ocean. The European Space Agency confirmed the complete loss of the satellite after its main communications array was severely damaged.\n\n## Technical Details\n- **Collision Object**: A fragment from India'\''s 2019 anti-satellite test (catalogued as object 44692)\n- **Fragment Size**: Approximately 15cm in diameter\n- **Impact Velocity**: 8.2 km/s relative velocity\n- **Debris Generation**: 200-400 new trackable pieces larger than 10cm created\n\n## Impact Assessment\n**Service Disruption**: The loss significantly affects telecommunications across Central and Eastern Europe, particularly emergency services and rural internet connectivity.\n\n**Financial Impact**: Insurance companies estimate preliminary losses at ‚Ç¨340 million, making this one of the costliest space incidents of 2025.\n\n**Orbital Safety**: The European Space Operations Centre has issued collision avoidance advisories for 12 operational satellites in similar orbital planes.\n\n## Recovery Efforts\nESA Mission Control in Darmstadt is coordinating with international partners to track the resulting debris field. Alternative routing through EuroSat-5 and EuroSat-9 is being implemented, though service degradation is expected for 4-6 weeks.\n\nThis incident highlights the growing concern of space debris and the Kessler Syndrome risk in increasingly congested orbital environments.",
          "name": null,
          "role": "assistant"
        },
        "model": "claude-3-haiku",
        "providerInfo": {
          "model": "claude-3-haiku",
          "provider": "anthropic"
        },
        "usage": {
          "completionTokens": 312,
          "promptTokens": 847,
          "totalTokens": 1159
        }
      },
      "created": "2025-10-16T09:23:18.492847Z",
      "expires": "2025-10-17T09:23:18.125643Z",
      "headers": {
        "content-length": "1847",
        "content-type": "application/json"
      },
      "id": "b9c4f7e2-1a8d-4e56-9f73-3b2e8c6d4a91",
      "method": "",
      "sender": "ai-router@spacetech.ai",
      "status_code": 200,
      "url": "syft://ai-router@spacetech.ai/app_data/claude-3-haiku/rpc/chat"
    }
  }
}</code></pre>

<h2>Advanced Features</h2>

            <h3>Custom Endpoints</h3>
            <p>Routers can implement custom endpoints beyond chat and search. Access any custom endpoint using the SyftBox relay pattern:</p>
            <pre><code># Custom endpoint example: document upload
curl -X POST https://syftbox.net/api/v1/send/ \
  -H "Content-Type: application/json" \
  -H "x-syft-from: user@example.com" \
  -d '{
    "document": "base64_encoded_content",
    "filename": "document.pdf",
    "metadata": {"category": "research"},
    "suffix-sender": "true",
    "x-syft-url": "syft://router_owner@example.com/app_data/my_router/rpc/upload"
  }'</code></pre>

            <h2>Direct Router Access (Development Only)</h2>
            <p>While the SyftBox relay system is the primary access method, routers also run locally and can be accessed directly for development and testing:</p>

            <pre><code># Direct chat request (local development only)
curl -X POST http://localhost:8001/chat \
  -H "Content-Type: application/json" \
  -d '{"message": "Hello locally!"}'

# Health check
curl http://localhost:8001/health

# API documentation
open http://localhost:8001/docs</code></pre>

            <div class="info-box">
                <strong>‚ö†Ô∏è Development Only</strong>
                <p>Direct router access is only available for local development and testing. Production traffic cannot reach the router directly, so it must go through the SyftBox relay system.</p>
            </div>


            <div class="next-steps" style="margin-top: 4rem; padding: 2rem; background: var(--color-bg-light); border-radius: 12px;">
                <h3>Next Steps</h3>
                <div class="guides-grid">
                    <a href="api-authentication.html" class="guide-card">
                        <h4>Authentication</h4>
                        <p>Learn about guest vs authenticated access patterns</p>
                        <span class="arrow">Learn more ‚Üí</span>
                    </a>
                    <a href="api-accounting.html" class="guide-card">
                        <h4>Accounting</h4>
                        <p>Usage tracking and billing for your router services</p>
                        <span class="arrow">Learn more ‚Üí</span>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-container">
            <div class="footer-content">
                <div class="footer-section">
                    <strong>Syft Router</strong>
                    <p>Connect data providers with AI consumers</p>
                </div>
                <div class="footer-links">
                    <a href="index.html">Home</a>
                    <a href="guides.html">Guides</a>
                    <a href="api-reference.html">API Reference</a>
                    <a href="../protocol.html">Protocol</a>
                    <a href="https://github.com/OpenMined/syft-llm-router">GitHub</a>
                    <a href="https://openmined.org">OpenMined</a>
                    <a href="https://slack.openmined.org">Community</a>
                </div>
            </div>
            <div class="footer-bottom">
                <p>¬© 2025 OpenMined. Built for a better internet.</p>
            </div>
        </div>
    </footer>

    <script>
        // Copy to clipboard functionality
        (function() {
            function copyTextToClipboard(text) {
                if (navigator.clipboard && navigator.clipboard.writeText) {
                    return navigator.clipboard.writeText(text);
                }
                var textarea = document.createElement('textarea');
                textarea.value = text;
                textarea.setAttribute('readonly', '');
                textarea.style.position = 'absolute';
                textarea.style.left = '-9999px';
                document.body.appendChild(textarea);
                textarea.select();
                try { document.execCommand('copy'); } catch (e) {}
                document.body.removeChild(textarea);
                return Promise.resolve();
            }

            document.querySelectorAll('pre').forEach(function(pre) {
                var wrapper = document.createElement('div');
                wrapper.className = 'code-copy-wrap';
                pre.parentNode.insertBefore(wrapper, pre);
                wrapper.appendChild(pre);

                var btn = document.createElement('button');
                btn.type = 'button';
                btn.className = 'copy-icon-btn';
                btn.setAttribute('aria-label', 'Copy code');
                btn.innerHTML = '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>';
                wrapper.appendChild(btn);

                btn.addEventListener('click', function() {
                    var code = pre.querySelector('code');
                    var text = code ? code.textContent.trim() : pre.textContent.trim();
                    copyTextToClipboard(text).then(function() {
                        btn.classList.add('copied');
                        btn.innerHTML = '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 6L9 17l-5-5"/></svg>';
                        setTimeout(function(){
                            btn.classList.remove('copied');
                            btn.innerHTML = '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2 2v1"></path></svg>';
                        }, 1200);
                    });
                });
            });
        })();
    </script>
</body>
</html>