<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pipeline API - syft-hub SDK Documentation</title>
    <link rel="stylesheet" href="styles.css?v=6">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Notice Bar -->
    <div class="notice-bar">
        <div class="notice-container">
            <span class="notice-text">syft-hub SDK is in beta. Payments are disabled during beta; enjoy $20 in free credits.</span>
        </div>
    </div>
    <!-- Header -->
    <header class="header">
        <div class="header-container">
            <a href="index.html" class="logo">
                <img width="32" height="32" src="syftbox-logo.svg" alt="SyftHub Logo">
                <span>syft-hub SDK</span>
            </a>
            <nav class="nav">
                <a href="index.html">Home</a>
                
                <a href="api-reference.html" class="active">API Reference</a>
                <a href="../protocol.html">Protocol</a>
                <a href="https://github.com/OpenMined/syft-nsai-sdk" target="_blank" class="github-link">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                    </svg>
                </a>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <div class="doc-layout">
        <!-- Breadcrumb -->
        <nav class="breadcrumb">
            <span class="separator">›</span>
            <a href="api-reference.html">API Reference</a>
            <span class="separator">›</span>
            <span>Pipeline API</span>
        </nav>

        <!-- Document Header -->
        <div class="doc-header">
            <h1>Pipeline API</h1>
            <p class="lead">Build and execute federated pipelines across the network services</p>
        </div>

        <!-- Navigation Pills -->
        <div class="nav-pills">
            <a href="api-reference.html" class="nav-pill">API Reference</a>
            <a href="api-client.html" class="nav-pill">Client</a>
            <a href="api-authentication.html" class="nav-pill">Authentication</a>
            <a href="api-services.html" class="nav-pill">Services</a>
            <a href="api-pipelines.html" class="nav-pill active">Pipelines</a>
        </div>
        <!-- Document Content -->
        <div class="doc-content">
            <!-- Table of Contents -->
            <div class="table-of-contents">
                <h3>Table of Contents</h3>
                <ul>
                    <li><a href="#constructor">Constructor</a></li>
                    <li><a href="#pipeline-properties">Pipeline Properties</a></li>
                    <li><a href="#execution">Execution</a></li>
                    <li><a href="#pipeline-management">Pipeline Management</a></li>
                    <li><a href="#result-properties">Result Properties</a></li>
                    <li><a href="#string-representation">String Representation</a></li>
                </ul>
            </div>

            <!-- Pipeline Class -->
            <div class="api-class">
                <h2 class="api-class-title">syft_hub.Pipeline</h2>
                <p class="api-class-description">Orchestrate multi-stage federated workflows combining multiple services.</p>

                <div class="api-section">
                    <h3 id="constructor">Constructor</h3>
                    <div class="api-method">
                        <div class="api-method-signature">
                            <code>client.pipeline(data_sources: List[Service], synthesizer: Service, context_format: str = "simple") -> Pipeline</code>
                        </div>
                        <p class="api-method-description">Create a Federated Retrieval-Augmented Generation (RAG) pipeline that combines multiple distributed data sources with a synthesizer model to provide enhanced, context-aware AI responses. Pipelines are always created through the client, never instantiated directly.</p>
                        
                        <div class="api-parameters">
                            <h4>Parameters</h4>
                            <div class="param-item">
                                <div class="param-header">
                                    <span class="param-name">data_sources</span>
                                    <span class="param-type">List[Service]</span>
                                    <span class="param-required">required</span>
                                </div>
                                <div class="param-description">List of data services for search/retrieval</div>
                            </div>
                            <div class="param-item">
                                <div class="param-header">
                                    <span class="param-name">synthesizer</span>
                                    <span class="param-type">Service</span>
                                    <span class="param-required">required</span>
                                </div>
                                <div class="param-description">Chat service for response generation</div>
                            </div>
                            <div class="param-item">
                                <div class="param-header">
                                    <span class="param-name">context_format</span>
                                    <span class="param-type">str</span>
                                    <span class="param-optional">optional</span>
                                </div>
                                <div class="param-description">Format for search context</div>
                                <div class="param-default">"simple"</div>
                            </div>
                        </div>

                        <div class="api-example">
                            <h4>Example</h4>
                            <pre><code><span class="comment"># Load services</span>
openmined_data = client.load_service(<span class="string">"irina@openmined.org/openmined-about"</span>)
claude_llm = client.load_service(<span class="string">"aggregator@openmined.org/claude-sonnet-3.5"</span>)

<span class="comment"># Create pipeline</span>
pipeline = client.pipeline(
    data_sources=[openmined_data],
    synthesizer=claude_llm
)</code></pre>
                        </div>
                    </div>
                </div>

                <div class="api-section">
                    <h3 id="pipeline-properties">Pipeline Properties</h3>
                    
                    <div class="api-method">
                        <div class="api-method-signature">
     
                            <code>data_sources: List[ServiceSpec]</code>
                        </div>
                        <p class="api-method-description">The collection of data services configured to provide source material for this pipeline, each representing a searchable knowledge base or data repository. These services are queried in parallel during pipeline execution to gather relevant context for the synthesizer model.</p>
                    </div>

                    <div class="api-method">
                        <div class="api-method-signature">
                            <code>synthesizer: ServiceSpec</code>
                        </div>
                        <p class="api-method-description">The AI model service designated to synthesize final responses based on retrieved context from data sources and user queries At the moment, the inputs are concatenated into the context.</p>
                    </div>

                    <div class="api-method">
                        <h4>Estimate Cost</h4><br>
                        <div class="api-method-signature">
                            <code>estimate_cost(message_count: int = 1) -> float</code>
                        </div>
                        <p class="api-method-description">Calculate an estimated total cost for executing this pipeline based on configured data sources and synthesizer costs..</p>
                        
                        <div class="api-example">
                            <h4>Example</h4>
                            <pre><code><span class="comment"># Estimate pipeline costs</span>
cost = pipeline.estimate_cost(message_count=<span class="number">1</span>)
<span class="keyword">print</span>(<span class="string">f"Estimated cost: ${cost:.4f}"</span>)</code></pre>
                        </div>
                    </div>
                </div>

                <div class="api-section">
                    <h3 id="execution">Execution</h3>
                    
                    <div class="api-method">
                        <h4>Run</h4><br>
                        <div class="api-method-signature">
                            <code>run(messages: List[Dict[str, str]], continue_without_results: bool = False) -> PipelineResult</code>
                        </div>
                        <p class="api-method-description">Execute the complete RAG pipeline synchronously, performing parallel searches across all configured data sources followed by synthesis of results into a comprehensive response. This method blocks until the entire workflow completes, making it ideal for interactive applications where you need the complete result before proceeding.</p>
                        
                        <div class="api-parameters">
                            <h4>Parameters</h4>
                            <div class="param-item">
                                <div class="param-header">
                                    <span class="param-name">messages</span>
                                    <span class="param-type">List[Dict]</span>
                                    <span class="param-required">required</span>
                                </div>
                                <div class="param-description">List of message dictionaries with <code>"role"</code> and <code>"content"</code> keys</div>
                            </div>
                            <div class="param-item">
                                <div class="param-header">
                                    <span class="param-name">continue_without_results</span>
                                    <span class="param-type">bool</span>
                                    <span class="param-optional">optional</span>
                                </div>
                                <div class="param-description">Whether to continue synthesis if no search results found</div>
                                <div class="param-default">False</div>
                            </div>
                        </div>

                        <div class="api-returns">
                            <h4>Returns</h4>
                            <p><code>PipelineResult</code> - Result object containing response, search results, and cost</p>
                        </div>

                        <div class="api-example">
                            <h4>Example</h4>
                            <pre><code><span class="comment"># Execute pipeline with messages</span>
query = <span class="string">"""Explain the concept of attribution-based control in AI systems. 
Please cover:
1. What is attribution-based control and why is it important?
2. How can attribution mechanisms help with AI governance?"""</span>

response = pipeline.run(messages=[
    {<span class="string">"role"</span>: <span class="string">"user"</span>, <span class="string">"content"</span>: query}
])

<span class="comment"># Access results</span>
<span class="keyword">print</span>(response.response.content)
<span class="keyword">print</span>(<span class="string">f"Sources: {len(response.search_results)} documents"</span>)
<span class="keyword">print</span>(<span class="string">f"Cost: ${response.cost:.4f}"</span>)</code></pre>
                        </div>
                    </div>

                    <div class="api-method">
                        <h4>Run Async</h4><br>
                        <div class="api-method-signature">
                            <code>run_async(messages: List[Dict[str, str]], continue_without_results: bool = False) -> Awaitable[PipelineResult]</code>
                        </div>
                        <p class="api-method-description">Execute the complete RAG pipeline asynchronously, enabling your application to handle other tasks while the multi-stage workflow processes in the background. This method is essential for scalable applications that need to manage multiple concurrent pipeline executions or maintain responsive user interfaces during long-running RAG operations.</p>
                        
                        <div class="api-example">
                            <h4>Example</h4>
                            <pre><code><span class="keyword">import</span> asyncio

<span class="keyword">async</span> <span class="keyword">def</span> <span class="function">main</span>():
    messages = [
        {<span class="string">"role"</span>: <span class="string">"user"</span>, <span class="string">"content"</span>: <span class="string">"What is attribution-based control?"</span>}
    ]
    result = <span class="keyword">await</span> pipeline.run_async(messages=messages)
    <span class="keyword">return</span> result

<span class="comment"># Run async pipeline</span>
result = asyncio.run(main())</code></pre>
                        </div>
                    </div>
                </div>

                <div class="api-section">
                    <h3 id="pipeline-management">Pipeline Management</h3>
                    
                    <div class="api-method">
                        <h4>Validate</h4><br>
                        <div class="api-method-signature">
                            <code>validate(skip_health_check: bool = False) -> bool</code>
                        </div>
                        <p class="api-method-description">Validate that the pipeline configuration is correct and all required services are available and accessible before execution. </p>
                        
                        <div class="api-example">
                            <h4>Example</h4>
                            <pre><code><span class="comment"># Validate pipeline before execution</span>
<span class="keyword">try</span>:
    pipeline.validate()
    <span class="keyword">print</span>(<span class="string">"Pipeline is valid"</span>)
<span class="keyword">except</span> ValidationError <span class="keyword">as</span> e:
    <span class="keyword">print</span>(<span class="string">f"Pipeline validation failed: {e}"</span>)</code></pre>
                        </div>
                    </div>

                    <div class="api-method">
                        <h4>Repr</h4><br>
                        <div class="api-method-signature">
                            <code>__repr__() -> str</code>
                        </div>
                        <p class="api-method-description">Display comprehensive pipeline configuration and status information in an interactive widget for Jupyter notebooks or formatted text for terminal environments. </p>
                        
                        <div class="api-example">
                            <h4>Example</h4>
                            <pre><code><span class="comment"># Display pipeline details</span>
pipeline  <span class="comment"># Shows data sources, synthesizer, cost estimate</span></code></pre>
                        </div>
                    </div>
                </div>
            </div>

            <!-- PipelineResult Class -->
            <div class="api-class">
                <h2 class="api-class-title">syft_hub.PipelineResult</h2>
                <p class="api-class-description">Container for RAG/FedRAG pipeline execution results and metadata.</p>

                <div class="api-section">
                    <h3 id="result-properties">Properties</h3>
                    
                    <div class="api-method">
                        <div class="api-method-signature">
     
                            <code>query: str</code>
                        </div>
                        <p class="api-method-description">The search query that was extracted from the user's messages and used to query data sources during pipeline execution. </p>
                    </div>

                    <div class="api-method">
                        <div class="api-method-signature">
     
                            <code>response: ChatResponse</code>
                        </div>
                        <p class="api-method-description">The final AI-generated response produced by the synthesizer service, which incorporates both the retrieved context from data sources and the user's original query. </p>
                    </div>

                    <div class="api-method">
                        <div class="api-method-signature">
     
                            <code>search_results: List[DocumentResult]</code>
                        </div>
                        <p class="api-method-description">The complete collection of search results retrieved from all configured data sources during pipeline execution, including content, relevance scores, and metadata. </p>
                    </div>

                    <div class="api-method">
                        <div class="api-method-signature">
     
                            <code>cost: float</code>
                        </div>
                        <p class="api-method-description">The aggregate cost charged for the complete pipeline execution.</p>
                    </div>

                    <div class="api-method">
                        <div class="api-method-signature">
     
                            <code>content: str</code>
                        </div>
                        <p class="api-method-description">Convenient shorthand property that directly accesses the text content of the synthesizer's response, eliminating the need to chain through the response object.</p>
                    </div>

                    <div class="api-method">
                        <div class="api-method-signature">
     
                            <code>timestamp: datetime</code>
                        </div>
                        <p class="api-method-description">The timestamp indicating when this pipeline execution began.</p>
                    </div>
                </div>

                <div class="api-section">
                    <h3 id="string-representation">String Representation</h3>
                    
                    <div class="api-method">
                        <h4>Str</h4><br>
                        <div class="api-method-signature">
                            <code>__str__() -> str</code>
                        </div>
                        <p class="api-method-description">Returns only the synthesized response content as a string.</p>
                        
                        <div class="api-example">
                            <h4>Example</h4>
                            <pre><code><span class="comment"># Print response content directly</span>
<span class="keyword">print</span>(result)  <span class="comment"># Prints response.content</span></code></pre>
                        </div>
                    </div>

                    <div class="api-method">
                        <h4>Repr</h4><br>
                        <div class="api-method-signature">
                            <code>__repr__() -> str</code>
                        </div>
                        <p class="api-method-description">Display a comprehensive view of the pipeline execution results including the query, response, source attribution, cost breakdown, and performance metrics in an interactive HTML widget for Jupyter or formatted text for terminal environments. </p>
                        
                        <div class="api-example">
                            <h4>Example</h4>
                            <pre><code><span class="comment"># Display full pipeline result</span>
result  <span class="comment"># Shows query, response, sources, cost breakdown</span></code></pre>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Related Pages -->
            <div class="related-pages">
                <h3>Related Documentation</h3>
                <div class="related-grid">
                    <a href="api-services.html" class="related-link">
                        <span class="related-icon">🌐</span>
                        <div>
                            <strong>Service API</strong>
                            <p>Services used in pipelines</p>
                        </div>
                    </a>
                    <a href="api-compute.html" class="related-link">
                        <span class="related-icon">🖥️</span>
                        <div>
                            <strong>Compute API</strong>
                            <p>Distributed computation</p>
                        </div>
                    </a>
                    <a href="quickstart.html" class="related-link">
                        <span class="related-icon">🚀</span>
                        <div>
                            <strong>Quickstart</strong>
                            <p>Pipeline examples</p>
                        </div>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-container">
            <div class="footer-content">
                <div class="footer-section">
                    <strong>syft-hub SDK</strong>
                    <p>Run decentralised AI on private data</p>
                </div>
                <div class="footer-links">
                    <a href="index.html">Home</a>
                    <a href="quickstart.html">Quickstart</a>
                    <a href="ai-services.html">Concepts</a>
                    <a href="api-reference.html">API Reference</a>
                    <a href="authentication.html">Authentication</a>
                    <a href="https://github.com/OpenMined/syft-nsai-sdk">GitHub</a>
                    <a href="https://openmined.org">OpenMined</a>
                    <a href="https://slack.openmined.org">Community</a>
                </div>
            </div>
            <div class="footer-bottom">
                <p>© 2025 OpenMined. Built for a better internet.</p>
            </div>
        </div>
    </footer>
</body>
</html>